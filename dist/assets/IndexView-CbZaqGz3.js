import{o as k,a as l,c as p,u as _,b as v,d as h,e as B,r as w,f as I,g as u,h as m}from"./index-luBbt2n1.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as y}from"./user-_0WvItVE.js";const f="google-sign-in-button",S={__name:"GoogleSignInButton",setup(g){k(()=>r());const{saveLocalStorageData:s}=_();function r(){google.accounts.id.initialize({client_id:"726454821610-5rqk8sln8sp378dknpkjafvhchti90kv.apps.googleusercontent.com",callback:c}),google.accounts.id.renderButton(document.querySelector(`#${f}`),{theme:"outline",size:"large",width:400})}function c(o){const t=i(o.credential);s(t.picture)}function i(o){try{const a=o.split(".")[1].replace(/[-_]/g,e=>e==="-"?"+":"/"),n=atob(a);return JSON.parse(decodeURIComponent(escape(n)))}catch(t){return console.error("Invalid JWT token:",t),null}}return(o,t)=>(l(),p("div",{id:f}))}},x={__name:"FacebookSignInButton",setup(g){const s=v(),{saveLocalStorageData:r}=B();h(async()=>await c());function c(){return new Promise(o=>{window.fbAsyncInit=function(){FB.init({appId:"858745269264434",cookie:!0,xfbml:!0,version:"v20.0"}),FB.AppEvents.logPageView(),o(!0)};const t=document,a="script",n="facebook-jssdk";let e;const d=t.getElementsByTagName(a)[0];t.getElementById(n)||(e=t.createElement(a),e.id=n,e.src="https://connect.facebook.net/en_US/sdk.js",d.parentNode.insertBefore(e,d))})}function i(){FB.login(function(o){o.status==="connected"&&FB.api("/me",{fields:"id,name,email,picture"},function(t){const a=t.picture.data.url;r(a),s.push({name:"Home"})})},{scope:"email",auth_type:"rerequest"})}return(o,t)=>(l(),p("button",{type:"button",class:"facebook-login-button",onClick:i}," 以 Facebook 帳戶登入 "))}},F=b(x,[["__scopeId","data-v-6332aab0"]]),U={class:"login-page"},G={class:"login-box"},A={class:"button-wrapper"},E={__name:"IndexView",setup(g){const{getLocalStorageData:s}=_(),r=w(s()!==null);document.addEventListener("visibilitychange",c),I(()=>document.removeEventListener("visibilitychange",c));function c(){r.value=s()!==null}const{setUserCoordinates:i}=y();o();function o(){navigator.geolocation.getCurrentPosition(t,a,{enableHighAccuracy:!1,timeout:5e3,maximumAge:0})}function t(n){const{latitude:e,longitude:d}=n.coords;i([e,d])}function a(n){i(void 0),console.error(n)}return(n,e)=>(l(),p("main",U,[u("div",G,[e[0]||(e[0]=u("h1",null,"新北市都市更新地點查詢",-1)),u("div",A,[r.value?(l(),m(F,{key:0})):(l(),m(S,{key:1}))]),e[1]||(e[1]=u("p",{class:"login-note"},"*請依序登入 Google 及 Facebbok 帳戶以開始使用",-1))]),e[2]||(e[2]=u("a",{class:"attribution",target:"_blank",href:"https://www.freepik.com/free-photo/cityscape-view-sceneric-urban-downtown_2792008.htm"},"Image by rawpixel.com on Freepik",-1))]))}},C=b(E,[["__scopeId","data-v-f392b19d"]]);export{C as default};
